<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CybeFox Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/cybefox.css">
</head>
<body style="margin: 0; padding: 0; overflow: hidden;">
    <% if (typeof link !== 'undefined') { %>
    <div id="player"></div>
    <% } %>
    <style>
        html, body { height: 100%; margin: 0; overflow: hidden; background: #0a0a0f; }
        #player { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    </style>
    <script>
        <% if (typeof link !== 'undefined') { %>
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%', width: '100%',
                videoId: '<%= link %>',
                playerVars: { 'autoplay': 1, 'mute': 1, 'controls': 0, 'disablekb': 1 },
                events: { 'onStateChange': onPlayerStateChange }
            });
        }
        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) { window.location.href = '/youtube?success=Video completed! Coins added.'; }
        }
        <% } else { %>
        window.location.href = '/youtube?error=No video available';
        <% } %>
    </script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
